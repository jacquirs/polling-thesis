kalman filtering & smoothing analysis
started: 2026-02-16 22:14:52
log file: output/kalman/kalman_analysis_log_20260216_221452.txt
time windows: [None, 200, 107]

======================================================================
======================================================================
ANALYZING TIME WINDOW: ALL DATA
======================================================================
======================================================================

======================================================================
ANCHORED MODE: bias decomposition conditional on known outcome (ALL DATA)
======================================================================
national polls loaded: 826 questions from 496 polls
date range: 2021-05-18 to 2024-11-04
true margin (constant across rows): 1.472 pp
poll margin range: -15.0 to 13.0 pp
mean poll margin: -0.766 pp

sanity check — unique true_margin values: [1.47233556]

election result appended: margin = 1.472 pp on 2024-11-05

estimating sigma2_u via grid search mle...
  sigma2_u estimated (two-stage grid mle): 0.456235 per day
  interpretation: true opinion can move ~0.675 pp/day (1 sd)

============================================================
polling bias decomposition — national (trump margin, anchored)
============================================================

true margin (certified result): 1.472 pp

--- overall poll error ---
  mean poll margin:          -0.766 pp
  mean total error:          -2.239 pp
  sd of total error:         3.850 pp

--- decomposition (means) ---
  mean systematic bias:      -2.609 pp
  mean |sampling noise|:     1.664 pp

--- variance decomposition ---
  var(total error):          14.8227
  var(systematic bias):      10.5078  (70.9%)
  var(sampling noise):       4.8623  (32.8%)

figure saved to: figures/kalman_bias_anchored_all_data.png
results exported to: data/kalman_results_anchored_all_data.csv

======================================================================
UNANCHORED MODE: real-time opinion trajectory from polls alone (ALL DATA)
======================================================================
national polls loaded: 826 questions from 496 polls
date range: 2021-05-18 to 2024-11-04
true margin (constant across rows): 1.472 pp
poll margin range: -15.0 to 13.0 pp
mean poll margin: -0.766 pp

skipping election result anchor (unanchored mode)
true margin: 1.472 pp (not used as constraint)

estimating sigma2_u via grid search mle...
  sigma2_u estimated (two-stage grid mle): 0.414574 per day
  interpretation: true opinion can move ~0.644 pp/day (1 sd)

============================================================
polling opinion trajectory — national (trump margin, unanchored)
============================================================

true margin (certified result): 1.472 pp

--- overall poll error ---
  mean poll margin:          -0.766 pp
  mean total error:          -2.239 pp
  sd of total error:         3.850 pp

--- decomposition (means) ---
  final forecast error:      -1.776 pp
  mean smoothed-poll gap:    1.673 pp
  mean |sampling noise|:     1.673 pp

figure saved to: figures/kalman_trajectory_unanchored_all_data.png
results exported to: data/kalman_results_unanchored_all_data.csv

======================================================================
COMPARISON: anchored vs unanchored (ALL DATA)
======================================================================
sigma2_u (anchored):   0.456235
sigma2_u (unanchored): 0.414574
ratio (anchored/unanchored): 1.100

final smoothed estimate (anchored):   0.609 pp
final smoothed estimate (unanchored): -0.304 pp
true margin:                          1.472 pp
unanchored forecast error:            -1.776 pp
anchored terminal adjustment:         0.863 pp

======================================================================
======================================================================
ANALYZING TIME WINDOW: LAST 200 DAYS
======================================================================
======================================================================

======================================================================
ANCHORED MODE: bias decomposition conditional on known outcome (LAST 200 DAYS)
======================================================================
date filter applied: keeping polls from 2024-04-19 onward
  polls before filter: 826
  polls after filter:  684
  polls dropped:       142
national polls loaded: 684 questions from 394 polls
date range: 2024-04-22 to 2024-11-04
true margin (constant across rows): 1.472 pp
poll margin range: -8.0 to 11.0 pp
mean poll margin: -1.828 pp

sanity check — unique true_margin values: [1.47233556]

election result appended: margin = 1.472 pp on 2024-11-05

estimating sigma2_u via grid search mle...
  sigma2_u estimated (two-stage grid mle): 0.455182 per day
  interpretation: true opinion can move ~0.675 pp/day (1 sd)

============================================================
polling bias decomposition — national (trump margin, anchored)
============================================================

true margin (certified result): 1.472 pp

--- overall poll error ---
  mean poll margin:          -1.828 pp
  mean total error:          -3.300 pp
  sd of total error:         2.796 pp

--- decomposition (means) ---
  mean systematic bias:      -3.761 pp
  mean |sampling noise|:     1.506 pp

--- variance decomposition ---
  var(total error):          7.8155
  var(systematic bias):      4.3115  (55.2%)
  var(sampling noise):       3.6767  (47.0%)

figure saved to: figures/kalman_bias_anchored_last_200_days.png
results exported to: data/kalman_results_anchored_last_200_days.csv

======================================================================
UNANCHORED MODE: real-time opinion trajectory from polls alone (LAST 200 DAYS)
======================================================================
date filter applied: keeping polls from 2024-04-19 onward
  polls before filter: 826
  polls after filter:  684
  polls dropped:       142
national polls loaded: 684 questions from 394 polls
date range: 2024-04-22 to 2024-11-04
true margin (constant across rows): 1.472 pp
poll margin range: -8.0 to 11.0 pp
mean poll margin: -1.828 pp

skipping election result anchor (unanchored mode)
true margin: 1.472 pp (not used as constraint)

estimating sigma2_u via grid search mle...
  sigma2_u estimated (two-stage grid mle): 0.411692 per day
  interpretation: true opinion can move ~0.642 pp/day (1 sd)

============================================================
polling opinion trajectory — national (trump margin, unanchored)
============================================================

true margin (certified result): 1.472 pp

--- overall poll error ---
  mean poll margin:          -1.828 pp
  mean total error:          -3.300 pp
  sd of total error:         2.796 pp

--- decomposition (means) ---
  final forecast error:      -1.778 pp
  mean smoothed-poll gap:    1.511 pp
  mean |sampling noise|:     1.511 pp

figure saved to: figures/kalman_trajectory_unanchored_last_200_days.png
results exported to: data/kalman_results_unanchored_last_200_days.csv

======================================================================
COMPARISON: anchored vs unanchored (LAST 200 DAYS)
======================================================================
sigma2_u (anchored):   0.455182
sigma2_u (unanchored): 0.411692
ratio (anchored/unanchored): 1.106

final smoothed estimate (anchored):   0.609 pp
final smoothed estimate (unanchored): -0.306 pp
true margin:                          1.472 pp
unanchored forecast error:            -1.778 pp
anchored terminal adjustment:         0.863 pp

======================================================================
======================================================================
ANALYZING TIME WINDOW: LAST 107 DAYS
======================================================================
======================================================================

======================================================================
ANCHORED MODE: bias decomposition conditional on known outcome (LAST 107 DAYS)
======================================================================
date filter applied: keeping polls from 2024-07-21 onward
  polls before filter: 826
  polls after filter:  649
  polls dropped:       177
national polls loaded: 649 questions from 367 polls
date range: 2024-07-21 to 2024-11-04
true margin (constant across rows): 1.472 pp
poll margin range: -8.0 to 8.0 pp
mean poll margin: -2.117 pp

sanity check — unique true_margin values: [1.47233556]

election result appended: margin = 1.472 pp on 2024-11-05

estimating sigma2_u via grid search mle...
  sigma2_u estimated (two-stage grid mle): 0.491303 per day
  interpretation: true opinion can move ~0.701 pp/day (1 sd)

============================================================
polling bias decomposition — national (trump margin, anchored)
============================================================

true margin (certified result): 1.472 pp

--- overall poll error ---
  mean poll margin:          -2.117 pp
  mean total error:          -3.589 pp
  sd of total error:         2.477 pp

--- decomposition (means) ---
  mean systematic bias:      -4.076 pp
  mean |sampling noise|:     1.469 pp

--- variance decomposition ---
  var(total error):          6.1354
  var(systematic bias):      2.5637  (41.8%)
  var(sampling noise):       3.4523  (56.3%)

figure saved to: figures/kalman_bias_anchored_last_107_days.png
results exported to: data/kalman_results_anchored_last_107_days.csv

======================================================================
UNANCHORED MODE: real-time opinion trajectory from polls alone (LAST 107 DAYS)
======================================================================
date filter applied: keeping polls from 2024-07-21 onward
  polls before filter: 826
  polls after filter:  649
  polls dropped:       177
national polls loaded: 649 questions from 367 polls
date range: 2024-07-21 to 2024-11-04
true margin (constant across rows): 1.472 pp
poll margin range: -8.0 to 8.0 pp
mean poll margin: -2.117 pp

skipping election result anchor (unanchored mode)
true margin: 1.472 pp (not used as constraint)

estimating sigma2_u via grid search mle...
  sigma2_u estimated (two-stage grid mle): 0.444491 per day
  interpretation: true opinion can move ~0.667 pp/day (1 sd)

============================================================
polling opinion trajectory — national (trump margin, unanchored)
============================================================

true margin (certified result): 1.472 pp

--- overall poll error ---
  mean poll margin:          -2.117 pp
  mean total error:          -3.589 pp
  sd of total error:         2.477 pp

--- decomposition (means) ---
  final forecast error:      -1.758 pp
  mean smoothed-poll gap:    1.474 pp
  mean |sampling noise|:     1.474 pp

figure saved to: figures/kalman_trajectory_unanchored_last_107_days.png
results exported to: data/kalman_results_unanchored_last_107_days.csv

======================================================================
COMPARISON: anchored vs unanchored (LAST 107 DAYS)
======================================================================
sigma2_u (anchored):   0.491303
sigma2_u (unanchored): 0.444491
ratio (anchored/unanchored): 1.105

final smoothed estimate (anchored):   0.600 pp
final smoothed estimate (unanchored): -0.286 pp
true margin:                          1.472 pp
unanchored forecast error:            -1.758 pp
anchored terminal adjustment:         0.873 pp

======================================================================
analysis completed: 2026-02-16 22:15:34
log saved to: output/kalman/kalman_analysis_log_20260216_221452.txt
